{"version":3,"file":"index.es6.js","sources":["../src/err-codes.js","../src/validates.js"],"sourcesContent":["/*\n定义用于返回的错误代码\n */\n\n// 成功\nexport const SUCCESS = 0;\n\n// 无权限访问\nexport const UNAUTHORIZED = 401;\n\n// 服务器错误\nexport const SERVER_FAILED = 500;\n\n// 其他错误\nexport const OTHER_ERROR = 999;\n\n// 必须填写的字段\nexport const REQUIRED = 1001;\n\n// 无效的电子邮件地址\nexport const INVALID_EMAIL_ADDRESS = 1002;\n\n// 字符串太短\nexport const TOO_SHORT_CHARACTERS = 1003;\n\n// 字符串太长\nexport const TOO_MANY_CHARACTERS = 1004;\n\n// 不是数字型\nexport const INVALID_NUMBER = 1005;\n\n// 不是整型数\nexport const INVALID_INTEGER = 1006;\n\n// 数值太小\nexport const TOO_SMALL_NUMBER = 1007;\n\n// 数值太大\nexport const TOO_LARGE_NUMBER = 1008;\n\n// 对象没找到\nexport const OBJECT_IS_NOT_FOUND = 1009;\n\n// 对象未定义或为空\nexport const OBJECT_IS_UNDEFINED_OR_NULL = 1010;\n\n// 未知错误\nexport const UNKNOWN_ERROR = -1;\n","/*\n一些方法来源于：https://github.com/erikras/react-redux-universal-hot-example/blob/master/src/utils/validation.js\n */\n\n/*\neslint-disable consistent-return\n */\nimport * as code from './err-codes';\n\nconst isEmpty = value => value === undefined || value === null || value === '';\nconst join = (rules) =>\n  (value, data) => rules.map(rule =>\n    rule(value, data)).filter(error => !!error)[0];\n\nexport function email(value) {\n  // Let's not start a debate on email regex. This is just for an example app!\n  if (!isEmpty(value) && !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value)) {\n    return 'Invalid email address';\n  }\n}\n\nexport function required(value) {\n  if (isEmpty(value)) {\n    return code.REQUIRED;\n  }\n}\n\nexport const number = value => {\n  if (Number.isNaN(Number(value))) {\n    return code.INVALID_NUMBER;\n  }\n};\n\nexport function integer(value) {\n  if (!Number.isInteger(Number(value))) {\n    return code.INVALID_INTEGER;\n  }\n}\n\nexport const range = (value, min, max) => {\n  if (number(value)) return number(value);\n  const num = Number(value);\n  if (num < min) return code.TOO_SMALL_NUMBER;\n  if (num > max) return code.TOO_LARGE_NUMBER;\n};\n\nexport function minLength(min) {\n  return value => {\n    if (!isEmpty(value) && value.length < min) {\n      return `Must be at least ${min} characters`;\n    }\n  };\n}\n\nexport function maxLength(max) {\n  return value => {\n    if (!isEmpty(value) && value.length > max) {\n      return `Must be no more than ${max} characters`;\n    }\n  };\n}\n\nexport function oneOf(enumeration) {\n  return value => {\n    if (!~enumeration.indexOf(value)) {\n      return `Must be one of: ${enumeration.join(', ')}`;\n    }\n  };\n}\n\nexport function match(field) {\n  return (value, data) => {\n    if (data) {\n      if (value !== data[field]) {\n        return 'Do not match';\n      }\n    }\n  };\n}\n\nexport function createValidator(rules) {\n  return (data = {}) => {\n    const errors = {};\n    Object.keys(rules).forEach((key) => {\n      // concat enables both functions and arrays of functions\n      const rule = join([].concat(rules[key]));\n      const error = rule(data[key], data);\n      if (error) {\n        errors[key] = error;\n      }\n    });\n    return errors;\n  };\n}\n"],"names":["code.REQUIRED","code.INVALID_NUMBER","code.INVALID_INTEGER","code.TOO_SMALL_NUMBER","code.TOO_LARGE_NUMBER"],"mappings":"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"}