{"version":3,"file":"index.umd.js","sources":["../src/err-codes.js","../src/validates.js"],"sourcesContent":["/*\n定义用于返回的错误代码\n */\n\n// 成功\nexport const SUCCESS = 0;\n\n// 无权限访问\nexport const UNAUTHORIZED = 401;\n\n// 服务器错误\nexport const SERVER_FAILED = 500;\n\n// 其他错误\nexport const OTHER_ERROR = 999;\n\n// 必须填写的字段\nexport const REQUIRED = 1001;\n\n// 无效的电子邮件地址\nexport const INVALID_EMAIL_ADDRESS = 1002;\n\n// 字符串太短\nexport const TOO_SHORT_CHARACTERS = 1003;\n\n// 字符串太长\nexport const TOO_MANY_CHARACTERS = 1004;\n\n// 不是数字型\nexport const INVALID_NUMBER = 1005;\n\n// 不是整型数\nexport const INVALID_INTEGER = 1006;\n\n// 数值太小\nexport const TOO_SMALL_NUMBER = 1007;\n\n// 数值太大\nexport const TOO_LARGE_NUMBER = 1008;\n\n// 对象没找到\nexport const OBJECT_IS_NOT_FOUND = 1009;\n\n// 对象未定义或为空\nexport const OBJECT_IS_UNDEFINED_OR_NULL = 1010;\n\n// 未知错误\nexport const UNKNOWN_ERROR = -1;\n","/*\n一些方法来源于：https://github.com/erikras/react-redux-universal-hot-example/blob/master/src/utils/validation.js\n */\n\n/*\neslint-disable consistent-return\n */\nimport * as code from './err-codes';\n\nconst isEmpty = value => value === undefined || value === null || value === '';\nconst join = (rules) =>\n  (value, data) => rules.map(rule =>\n    rule(value, data)).filter(error => !!error)[0];\n\nexport function email(value) {\n  // Let's not start a debate on email regex. This is just for an example app!\n  if (!isEmpty(value) && !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value)) {\n    return 'Invalid email address';\n  }\n}\n\nexport function required(value) {\n  if (isEmpty(value)) {\n    return code.REQUIRED;\n  }\n}\n\nexport const number = value => {\n  if (Number.isNaN(Number(value))) {\n    return code.INVALID_NUMBER;\n  }\n};\n\nexport function integer(value) {\n  if (!Number.isInteger(Number(value))) {\n    return code.INVALID_INTEGER;\n  }\n}\n\nexport const range = (value, min, max) => {\n  if (number(value)) return number(value);\n  const num = Number(value);\n  if (num < min) return code.TOO_SMALL_NUMBER;\n  if (num > max) return code.TOO_LARGE_NUMBER;\n};\n\nexport function minLength(min) {\n  return value => {\n    if (!isEmpty(value) && value.length < min) {\n      return `Must be at least ${min} characters`;\n    }\n  };\n}\n\nexport function maxLength(max) {\n  return value => {\n    if (!isEmpty(value) && value.length > max) {\n      return `Must be no more than ${max} characters`;\n    }\n  };\n}\n\nexport function oneOf(enumeration) {\n  return value => {\n    if (!~enumeration.indexOf(value)) {\n      return `Must be one of: ${enumeration.join(', ')}`;\n    }\n  };\n}\n\nexport function match(field) {\n  return (value, data) => {\n    if (data) {\n      if (value !== data[field]) {\n        return 'Do not match';\n      }\n    }\n  };\n}\n\nexport function createValidator(rules) {\n  return (data = {}) => {\n    const errors = {};\n    Object.keys(rules).forEach((key) => {\n      // concat enables both functions and arrays of functions\n      const rule = join([].concat(rules[key]));\n      const error = rule(data[key], data);\n      if (error) {\n        errors[key] = error;\n      }\n    });\n    return errors;\n  };\n}\n"],"names":["code.REQUIRED","code.INVALID_NUMBER","code.INVALID_INTEGER","code.TOO_SMALL_NUMBER","code.TOO_LARGE_NUMBER"],"mappings":"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"}